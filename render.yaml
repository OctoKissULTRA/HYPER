services:
  - type: web
    name: hypertrends-alpaca
    env: python
    plan: starter
    region: oregon
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn main:app --bind 0.0.0.0:$PORT --worker-class uvicorn.workers.UvicornWorker --workers 1 --timeout 120
    healthCheckPath: /health
    autoDeploy: true
    envVars:
      - key: ENVIRONMENT
        value: production
      - key: USE_SANDBOX
        value: "True"
      - key: DATA_SOURCE
        value: alpaca
      - key: APCA_API_KEY_ID
        sync: false
      - key: APCA_API_SECRET_KEY
        sync: false
      - key: VERBOSE
        value: "False"
    disk:
      name: hyper-data
      mountPath: /app/data
      sizeGB: 1